<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>TOTP with a password manager that doesn't support TOTP 😅</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/bulma.min.css">
  <link rel="stylesheet" href="/main.css">
  <meta property="og:title" content="TOTP with a password manager that doesn't support TOTP 😅">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@valeriangalliat">
  <meta name="twitter:creator" content="@valeriangalliat">
</head>
<body class="section">
  <div class="container is-max-desktop has-text-centered">
    <h1 class="title is-3 mb-6">TOTP with a password manager that doesn't support TOTP 😅</h1>
    <form class="is-table mx-auto" id="form">
      <div class="field has-addons">
        <div class="control">
          <button class="button" name="scanCode" type="button">Scan code 🤳</button>
          <button class="button is-danger is-hidden" name="cancel" type="button">Cancel</button>
        </div>
        <div class="control">
          <input class="is-hidden" name="file" type="file">
          <button class="button" name="scanImage" type="button">Scan image 🖼️</button>
        </div>
        <div class="control">
          <input class="input" type="text" name="username" placeholder="Service" size="12" autocomplete="off">
        </div>
        <div class="control">
          <input class="input" type="password" name="password" placeholder="TOTP params" size="12" autocomplete="off">
        </div>
        <div class="control">
          <button class="button" name="showDetails" type="button">🍔</button>
        </div>
        <div class="control">
          <button class="button is-info" type="submit">Get TOTP! 🚀</button>
        </div>
      </div>
    </form>
    <form class="is-hidden is-table mt-5 mx-auto has-text-left" id="form-details">
      <div class="is-flex">
        <div class="field">
          <label class="label">Secret</label>
          <div class="control">
            <input class="input" type="text" name="secret" size="12" autocomplete="off">
          </div>
        </div>
        <div class="field">
          <label class="label">Algorithm</label>
          <div class="control">
            <select class="input" name="algorithm">
              <option value="SHA-1">SHA-1</option>
              <option value="SHA-224">SHA-224</option>
              <option value="SHA-256">SHA-256</option>
              <option value="SHA-384">SHA-384</option>
              <option value="SHA-512">SHA-512</option>
            </select>
          </div>
        </div>
        <div class="field">
          <label class="label">Digits</label>
          <div class="control">
            <input class="input" type="number" name="digits" value="6" size="1" autocomplete="off">
          </div>
        </div>
        <div class="field">
          <label class="label">Period</label>
          <div class="control">
            <input class="input" type="number" name="period" value="30" size="1" autocomplete="off">
          </div>
        </div>
        <div class="field has-no-label">
          <div class="control">
            <button class="button is-danger" name="authyMode" type="button">Authy</button>
          </div>
        </div>
        <div class="field has-no-label">
          <div class="control">
            <button class="button is-success" name="resetDefaults" type="button">Reset</button>
          </div>
        </div>
      </div>
    </form>
    <div class="mt-5 is-hidden" id="result">
      Your code is <input class="input is-inline" id="code"></span>. Copied to clipboard! 🎉
    </div>
    <div class="mt-5 is-hidden" id="error">
      No QR code found. 😥
    </div>
    <div class="mt-2 is-hidden" id="preview">
      <video class="is-block m-auto"></video>
    </div>
    <h2 class="title is-4 mt-6">How to use this? 🤔</h2>
    <div class="content">
      <ul>
        <li>Scan TOTP QR code or paste plaintext TOTP secret</li>
        <li>Submit so you can save the TOTP params in your password manager</li>
        <li><strong>Tip:</strong> use the username field to give it a meaningful name</li>
        <li>When you come back, focus the password field to select amongst all the secrets you saved</li>
        <li>Profit 😎</li>
      </ul>
    </div>
    <h2 class="title is-4">Do you steal my secrets? 😱</h2>
    <div class="content">
      <details>
        <summary><strong>No.</strong></summary>
        <div class="message is-info mt-4">
          <div class="message-body">
            <p>This works by tricking your password manager into saving your TOTP secrets as if they were user passwords on this domain.</p>
            <p>We use the secret that you input by scanning a QR code or using your password manager autofill to generate a one-time password on your request.</p>
            <p>The secret never leaves your browser.</p>
          </div>
        </div>
      </details>
    </div>
    <h2 class="title is-4">View the code on GitHub!</h2>
    <div class="content">
      <p><strong><a href="https://github.com/valeriangalliat/totp">I love viewing the code! 😍</a></strong></p>
    </div>
    <h2 class="title is-4">Bonus: replacing Authy</h2>
    <div class="content">
      <details>
        <summary>See the magic.</summary>
        <div class="message is-info mt-4">
          <div class="message-body">
            <p>Use <a href="https://github.com/valeriangalliat/authy-user-client">this cool program</a> to dump your Authy codes as standard TOTP URIs.</p>
            <p>You can paste them above like any other TOTP secret.</p>
            <p><strong>Pro tip:</strong> click the hamburger menu 🍔 to see (and modify) the detailed TOTP parameters.</p>
          </div>
        </div>
      </details>
    </div>
  </div>
  <div class="dropzone is-hidden" id="dropzone"></div>
  <script src="main.js"></script>
</body>
</html>
